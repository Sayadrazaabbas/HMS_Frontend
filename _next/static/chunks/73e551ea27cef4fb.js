(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},95468,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],95468)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},84827,e=>{"use strict";var t=e.i(9165);e.s(["appointmentsApi",0,{getAll:(e=1,a=10,s)=>t.default.get("/appointments",{params:{page:e,limit:a,...s}}),getById:e=>t.default.get(`/appointments/${e}`),getTodayByDoctor:e=>t.default.get(`/appointments/today/${e}`),getAvailableSlots:(e,a)=>t.default.get("/appointments/slots",{params:{doctorId:e,date:a}}),getDoctors:()=>t.default.get("/appointments/doctors"),create:e=>t.default.post("/appointments",e),updateStatus:(e,a)=>t.default.patch(`/appointments/${e}/status`,{status:a}),update:(e,a)=>t.default.put(`/appointments/${e}`,a),cancel:e=>t.default.delete(`/appointments/${e}`)},"billingApi",0,{getAll:(e=1,a=10,s)=>t.default.get("/billing/invoices",{params:{page:e,limit:a,...s}}),getById:e=>t.default.get(`/billing/invoices/${e}`),create:e=>t.default.post("/billing/invoices",e),addPayment:(e,a)=>t.default.post(`/billing/invoices/${e}/payments`,a),getServices:()=>t.default.get("/billing/services")},"pharmacyApi",0,{getMedicines:(e=1,a=10,s)=>t.default.get("/pharmacy/medicines",{params:{page:e,limit:a,search:s}}),getMedicineById:e=>t.default.get(`/pharmacy/medicines/${e}`),getStock:()=>t.default.get("/pharmacy/stock"),getLowStock:()=>t.default.get("/pharmacy/stock/low"),dispenseMedicine:e=>t.default.post("/pharmacy/dispense",e),getPrescriptions:e=>t.default.get("/pharmacy/prescriptions",{params:{patientId:e}})}])},9182,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(87316),l=e.i(3116),n=e.i(84614),i=e.i(20286),o=e.i(73375),c=e.i(63209),d=e.i(95468),m=e.i(84827),p=e.i(9165);function u(){let e=(0,s.useRouter)(),[u,x]=(0,a.useState)(!1),[g,h]=(0,a.useState)([]),[y,f]=(0,a.useState)([]),[b,j]=(0,a.useState)([]),[v,N]=(0,a.useState)(!1),[k,w]=(0,a.useState)(""),[S,C]=(0,a.useState)({patientId:"",doctorId:"",date:new Date().toISOString().split("T")[0],startTime:"",type:"CONSULTATION",reason:"",notes:""});(0,a.useEffect)(()=>{A(),T()},[]),(0,a.useEffect)(()=>{S.doctorId&&S.date&&I()},[S.doctorId,S.date]);let A=async()=>{try{let e=await m.appointmentsApi.getDoctors();h(e.data.data)}catch(e){console.error("Failed to fetch doctors:",e)}},T=async()=>{try{let e=await p.default.get("/patients",{params:{limit:100}});f(e.data.data)}catch(e){console.error("Failed to fetch patients:",e)}},I=async()=>{try{let e=await m.appointmentsApi.getAvailableSlots(S.doctorId,S.date);j(e.data.data)}catch(e){console.error("Failed to fetch slots:",e),j([])}},$=async t=>{t.preventDefault(),x(!0),w("");try{await m.appointmentsApi.create(S),N(!0),setTimeout(()=>{e.push("/appointments")},1500)}catch(e){w(e.response?.data?.error?.message||"Failed to create appointment")}finally{x(!1)}};return v?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(d.CheckCircle2,{className:"w-8 h-8 text-green-600"})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Appointment Booked!"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Redirecting to appointments..."})]})}):(0,t.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>e.back(),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(o.ChevronLeft,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"New Appointment"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Book a new patient appointment"})]})]}),(0,t.jsxs)("form",{onSubmit:$,className:"bg-white rounded-2xl border border-gray-100 p-6 space-y-6",children:[k&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-100 rounded-xl text-red-700",children:[(0,t.jsx)(c.AlertCircle,{className:"w-5 h-5 flex-shrink-0"}),(0,t.jsx)("p",{className:"text-sm",children:k})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(n.User,{className:"w-4 h-4 inline mr-2"}),"Select Patient *"]}),(0,t.jsxs)("select",{required:!0,value:S.patientId,onChange:e=>C({...S,patientId:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition-all",children:[(0,t.jsx)("option",{value:"",children:"-- Select Patient --"}),y.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.patientId,") - ",e.phone]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(i.Stethoscope,{className:"w-4 h-4 inline mr-2"}),"Select Doctor *"]}),(0,t.jsxs)("select",{required:!0,value:S.doctorId,onChange:e=>C({...S,doctorId:e.target.value,startTime:""}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition-all",children:[(0,t.jsx)("option",{value:"",children:"-- Select Doctor --"}),g.map(e=>(0,t.jsxs)("option",{value:e.id,children:["Dr. ",e.user.name," - ",e.department.name]},e.id))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(r.Calendar,{className:"w-4 h-4 inline mr-2"}),"Date *"]}),(0,t.jsx)("input",{type:"date",required:!0,min:new Date().toISOString().split("T")[0],value:S.date,onChange:e=>C({...S,date:e.target.value,startTime:""}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition-all"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment Type *"}),(0,t.jsxs)("select",{required:!0,value:S.type,onChange:e=>C({...S,type:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition-all",children:[(0,t.jsx)("option",{value:"CONSULTATION",children:"New Consultation"}),(0,t.jsx)("option",{value:"FOLLOW_UP",children:"Follow-up"}),(0,t.jsx)("option",{value:"PROCEDURE",children:"Procedure"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(l.Clock,{className:"w-4 h-4 inline mr-2"}),"Select Time Slot *"]}),S.doctorId&&S.date?0===b.length?(0,t.jsx)("p",{className:"text-sm text-red-500",children:"No available slots for this date"}):(0,t.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:b.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>C({...S,startTime:e}),className:`px-3 py-2 text-sm font-medium rounded-lg transition-all ${S.startTime===e?"bg-teal-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:(e=>{let[t,a]=e.split(":"),s=parseInt(t);return`${s%12||12}:${a} ${s>=12?"PM":"AM"}`})(e)},e))}):(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Please select a doctor and date first"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Visit"}),(0,t.jsx)("input",{type:"text",value:S.reason,onChange:e=>C({...S,reason:e.target.value}),placeholder:"e.g., General checkup, Fever, Follow-up...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition-all"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),(0,t.jsx)("textarea",{value:S.notes,onChange:e=>C({...S,notes:e.target.value}),rows:3,placeholder:"Any additional information...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition-all resize-none"})]}),(0,t.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>e.back(),className:"flex-1 px-6 py-3 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:u||!S.startTime,className:"flex-1 px-6 py-3 bg-gradient-to-r from-teal-500 to-cyan-600 text-white font-medium rounded-xl hover:from-teal-600 hover:to-cyan-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Booking..."]}):"Book Appointment"})]})]})]})}e.s(["default",()=>u])}]);